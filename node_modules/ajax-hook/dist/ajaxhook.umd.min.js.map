{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 27b137ac5fdd8a446345","webpack:///ajaxhook.umd.min.js","webpack:///./src/xhr-hook.js","webpack:///./src/xhr-proxy.js","webpack:///./index.js"],"names":["root","factory","exports","module","define","amd","a","i","this","__webpack_require__","moduleId","installedModules","l","modules","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","configEvent","event","xhrProxy","e","attr","target","currentTarget","hook","proxy","win","getterFactory","originValue","OriginXhr","hooking","v","attrGetterHook","setterFactory","xhr","that","substring","attrSetterHook","hookFunction","fun","args","slice","arguments","ret","apply","unHook","XMLHttpRequest","HookXMLHttpRequest","originXhr","constructor","undefined","window","events","length","key","type","set","getProxy","assign","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","_typeof","Symbol","iterator","obj","proxyAjax","trim","str","replace","getEventTarget","watcher","document","createElement","triggerListener","callback","evt","Event","bubbles","createEvent","initEvent","dispatchEvent","Handler","makeHandler","next","sub","create","getResponseData","responseType","responseText","response","JSON","parse","console","warn","handleResponse","handler","ResponseHandler","status","statusText","config","headers","resHeader","getAllResponseHeaders","split","reduce","ob","shift","join","onResponse","resolve","onerror","error","errorType","ErrorHandler","onError","preventXhrProxyCallback","errorCallback","stateChangeCallback","readyState","eventReadyStateChange","onRequest","onload","onloadend","eventError","ontimeout","eventTimeout","onabort","eventAbort","onreadystatechange","open","_this","method","url","async","user","password","evName","send","withCredentials","body","req","RequestHandler","setTimeout","setRequestHeader","toLowerCase","addEventListener","indexOf","isTrusted","_","header","getResponseHeader","unProxy","eventLoad","eventLoadEnd","reject","rq","_xhrHook","_xhrProxy"],"mappings":"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","file":"ajaxhook.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 27b137ac5fdd8a446345","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 2);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.configEvent = configEvent;\nexports.hook = hook;\n/*\n * author: wendux\n * email: 824783146@qq.com\n * source code: https://github.com/wendux/Ajax-hook\n */\n\nvar events = exports.events = ['load', 'loadend', 'timeout', 'error', 'readystatechange', 'abort'];\n\nvar OriginXhr = '__origin_xhr';\n\nfunction configEvent(event, xhrProxy) {\n  var e = {};\n  for (var attr in event) {\n    e[attr] = event[attr];\n  } // xhrProxy instead\n  e.target = e.currentTarget = xhrProxy;\n  return e;\n}\n\nfunction hook(proxy, win) {\n  win = win || window;\n  var originXhr = win.XMLHttpRequest;\n\n  var hooking = true;\n\n  var HookXMLHttpRequest = function HookXMLHttpRequest() {\n    // We shouldn't hookAjax XMLHttpRequest.prototype because we can't\n    // guarantee that all attributes are on the prototype。\n    // Instead, hooking XMLHttpRequest instance can avoid this problem.\n\n    var xhr = new originXhr();\n\n    // Generate all callbacks(eg. onload) are enumerable (not undefined).\n    for (var i = 0; i < events.length; ++i) {\n      var key = 'on' + events[i];\n      if (xhr[key] === undefined) xhr[key] = null;\n    }\n\n    for (var attr in xhr) {\n      var type = \"\";\n      try {\n        type = _typeof(xhr[attr]); // May cause exception on some browser\n      } catch (e) {}\n      if (type === \"function\") {\n        // hookAjax methods of xhr, such as `open`、`send` ...\n        this[attr] = hookFunction(attr);\n      } else if (attr !== OriginXhr) {\n        Object.defineProperty(this, attr, {\n          get: getterFactory(attr),\n          set: setterFactory(attr),\n          enumerable: true\n        });\n      }\n    }\n    var that = this;\n    xhr.getProxy = function () {\n      return that;\n    };\n    this[OriginXhr] = xhr;\n  };\n\n  HookXMLHttpRequest.prototype = originXhr.prototype;\n  HookXMLHttpRequest.prototype.constructor = HookXMLHttpRequest;\n\n  win.XMLHttpRequest = HookXMLHttpRequest;\n\n  Object.assign(win.XMLHttpRequest, { UNSENT: 0, OPENED: 1, HEADERS_RECEIVED: 2, LOADING: 3, DONE: 4 });\n\n  // Generate getter for attributes of xhr\n  function getterFactory(attr) {\n    return function () {\n      var originValue = this[OriginXhr][attr];\n      if (hooking) {\n        var v = this.hasOwnProperty(attr + \"_\") ? this[attr + \"_\"] : originValue;\n        var attrGetterHook = (proxy[attr] || {})[\"getter\"];\n        return attrGetterHook && attrGetterHook(v, this) || v;\n      } else {\n        return originValue;\n      }\n    };\n  }\n\n  // Generate setter for attributes of xhr; by this we have an opportunity\n  // to hookAjax event callbacks （eg: `onload`） of xhr;\n  function setterFactory(attr) {\n    return function (v) {\n      var xhr = this[OriginXhr];\n      if (hooking) {\n        var that = this;\n        var hook = proxy[attr];\n        // hookAjax  event callbacks such as `onload`、`onreadystatechange`...\n        if (attr.substring(0, 2) === 'on') {\n          that[attr + \"_\"] = v;\n          xhr[attr] = function (e) {\n            e = configEvent(e, that);\n            var ret = proxy[attr] && proxy[attr].call(that, xhr, e);\n            ret || v.call(that, e);\n          };\n        } else {\n          //If the attribute isn't writable, generate proxy attribute\n          var attrSetterHook = (hook || {})[\"setter\"];\n          v = attrSetterHook && attrSetterHook(v, that) || v;\n          this[attr + \"_\"] = v;\n          try {\n            // Not all attributes of xhr are writable(setter may undefined).\n            xhr[attr] = v;\n          } catch (e) {}\n        }\n      } else {\n        xhr[attr] = v;\n      }\n    };\n  }\n\n  // Hook methods of xhr.\n  function hookFunction(fun) {\n    return function () {\n      var args = [].slice.call(arguments);\n      if (proxy[fun] && hooking) {\n        var ret = proxy[fun].call(this, args, this[OriginXhr]);\n        // If the proxy return value exists, return it directly,\n        // otherwise call the function of xhr.\n        if (ret) return ret;\n      }\n      return this[OriginXhr][fun].apply(this[OriginXhr], args);\n    };\n  }\n\n  function unHook() {\n    hooking = false;\n    if (win.XMLHttpRequest === HookXMLHttpRequest) {\n      win.XMLHttpRequest = originXhr;\n      HookXMLHttpRequest.prototype.constructor = originXhr;\n      originXhr = undefined;\n    }\n  }\n\n  // Return the real XMLHttpRequest and unHook func\n  return { originXhr: originXhr, unHook: unHook };\n}\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.proxy = proxy;\n\nvar _xhrHook = __webpack_require__(0);\n\nvar eventLoad = _xhrHook.events[0],\n    eventLoadEnd = _xhrHook.events[1],\n    eventTimeout = _xhrHook.events[2],\n    eventError = _xhrHook.events[3],\n    eventReadyStateChange = _xhrHook.events[4],\n    eventAbort = _xhrHook.events[5]; /*\n                                      * author: wendux\n                                      * email: 824783146@qq.com\n                                      * source code: https://github.com/wendux/Ajax-hook\n                                      */\n\nvar prototype = 'prototype';\n\nfunction proxy(proxy, win) {\n  win = win || window;\n  return proxyAjax(proxy, win);\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction getEventTarget(xhr) {\n  return xhr.watcher || (xhr.watcher = document.createElement('a'));\n}\n\nfunction triggerListener(xhr, name) {\n  var xhrProxy = xhr.getProxy();\n  var callback = 'on' + name + '_';\n  var event = (0, _xhrHook.configEvent)({ type: name }, xhrProxy);\n  xhrProxy[callback] && xhrProxy[callback](event);\n  var evt;\n  if (typeof Event === 'function') {\n    evt = new Event(name, { bubbles: false });\n  } else {\n    // https://stackoverflow.com/questions/27176983/dispatchevent-not-working-in-ie11\n    evt = document.createEvent('Event');\n    evt.initEvent(name, false, true);\n  }\n  getEventTarget(xhr).dispatchEvent(evt);\n}\n\nfunction Handler(xhr) {\n  this.xhr = xhr;\n  this.xhrProxy = xhr.getProxy();\n}\n\nHandler[prototype] = Object.create({\n  resolve: function resolve(response) {\n    var xhrProxy = this.xhrProxy;\n    var xhr = this.xhr;\n    xhrProxy.readyState = 4;\n    xhr.resHeader = response.headers;\n    xhrProxy.response = xhrProxy.responseText = response.response;\n    xhrProxy.statusText = response.statusText;\n    xhrProxy.status = response.status;\n    triggerListener(xhr, eventReadyStateChange);\n    triggerListener(xhr, eventLoad);\n    triggerListener(xhr, eventLoadEnd);\n  },\n  reject: function reject(error) {\n    this.xhrProxy.status = 0;\n    triggerListener(this.xhr, error.type);\n    triggerListener(this.xhr, eventLoadEnd);\n  }\n});\n\nfunction makeHandler(next) {\n  function sub(xhr) {\n    Handler.call(this, xhr);\n  }\n\n  sub[prototype] = Object.create(Handler[prototype]);\n  sub[prototype].next = next;\n  return sub;\n}\n\nvar RequestHandler = makeHandler(function (rq) {\n  var xhr = this.xhr;\n  rq = rq || xhr.config;\n  xhr.withCredentials = rq.withCredentials;\n  xhr.open(rq.method, rq.url, rq.async !== false, rq.user, rq.password);\n  for (var key in rq.headers) {\n    xhr.setRequestHeader(key, rq.headers[key]);\n  }\n  xhr.send(rq.body);\n});\n\nvar ResponseHandler = makeHandler(function (response) {\n  this.resolve(response);\n});\n\nvar ErrorHandler = makeHandler(function (error) {\n  this.reject(error);\n});\n\nfunction proxyAjax(proxy, win) {\n  var onRequest = proxy.onRequest,\n      onResponse = proxy.onResponse,\n      onError = proxy.onError;\n\n  function getResponseData(xhrProxy) {\n    var responseType = xhrProxy.responseType;\n    if (!responseType || responseType === 'text') {\n      return xhrProxy.responseText;\n    }\n    // reference: https://shanabrian.com/web/html-css-js-technics/js-ie10-ie11-xhr-json-string.php\n    // reference: https://github.com/axios/axios/issues/2390\n    // json - W3C standard - xhrProxy.response = JSON object; responseText is unobtainable\n    // For details, see https://github.com/wendux/ajax-hook/issues/117\n    // IE 9, 10 & 11 - only responseText\n    var response = xhrProxy.response;\n    if (responseType === 'json' && !response) {\n      try {\n        return JSON.parse(xhrProxy.responseText);\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n    return response;\n  };\n\n  function handleResponse(xhr, xhrProxy) {\n    var handler = new ResponseHandler(xhr);\n    var ret = {\n      response: getResponseData(xhrProxy),\n      status: xhrProxy.status,\n      statusText: xhrProxy.statusText,\n      config: xhr.config,\n      headers: xhr.resHeader || xhr.getAllResponseHeaders().split('\\r\\n').reduce(function (ob, str) {\n        if (str === \"\") return ob;\n        var m = str.split(\":\");\n        ob[m.shift()] = trim(m.join(':'));\n        return ob;\n      }, {})\n    };\n    if (!onResponse) return handler.resolve(ret);\n    onResponse(ret, handler);\n  }\n\n  function onerror(xhr, xhrProxy, error, errorType) {\n    var handler = new ErrorHandler(xhr);\n    error = { config: xhr.config, error: error, type: errorType };\n    if (onError) {\n      onError(error, handler);\n    } else {\n      handler.next(error);\n    }\n  }\n\n  function preventXhrProxyCallback() {\n    return true;\n  }\n\n  function errorCallback(errorType) {\n    return function (xhr, e) {\n      onerror(xhr, this, e, errorType);\n      return true;\n    };\n  }\n\n  function stateChangeCallback(xhr, xhrProxy) {\n    if (xhr.readyState === 4 && xhr.status !== 0) {\n      handleResponse(xhr, xhrProxy);\n    } else if (xhr.readyState !== 4) {\n      triggerListener(xhr, eventReadyStateChange);\n    }\n    return true;\n  }\n\n  var _hook = (0, _xhrHook.hook)({\n    onload: preventXhrProxyCallback,\n    onloadend: preventXhrProxyCallback,\n    onerror: errorCallback(eventError),\n    ontimeout: errorCallback(eventTimeout),\n    onabort: errorCallback(eventAbort),\n    onreadystatechange: function onreadystatechange(xhr) {\n      return stateChangeCallback(xhr, this);\n    },\n    open: function open(args, xhr) {\n      var _this = this;\n      var config = xhr.config = { headers: {} };\n      config.method = args[0];\n      config.url = args[1];\n      config.async = args[2];\n      config.user = args[3];\n      config.password = args[4];\n      config.xhr = xhr;\n      var evName = 'on' + eventReadyStateChange;\n      if (!xhr[evName]) {\n        xhr[evName] = function () {\n          return stateChangeCallback(xhr, _this);\n        };\n      }\n\n      // 如果有请求拦截器，则在调用onRequest后再打开链接。因为onRequest最佳调用时机是在send前，\n      // 所以我们在send拦截函数中再手动调用open，因此返回true阻止xhr.open调用。\n      //\n      // 如果没有请求拦截器，则不用阻断xhr.open调用\n      if (onRequest) return true;\n    },\n    send: function send(args, xhr) {\n      var config = xhr.config;\n      config.withCredentials = xhr.withCredentials;\n      config.body = args[0];\n      if (onRequest) {\n        // In 'onRequest', we may call XHR's event handler, such as `xhr.onload`.\n        // However, XHR's event handler may not be set until xhr.send is called in\n        // the user's code, so we use `setTimeout` to avoid this situation\n        var req = function req() {\n          onRequest(config, new RequestHandler(xhr));\n        };\n        config.async === false ? req() : setTimeout(req);\n        return true;\n      }\n    },\n    setRequestHeader: function setRequestHeader(args, xhr) {\n      // Collect request headers\n      xhr.config.headers[args[0].toLowerCase()] = args[1];\n      if (onRequest) return true;\n    },\n    addEventListener: function addEventListener(args, xhr) {\n      var _this = this;\n      if (_xhrHook.events.indexOf(args[0]) !== -1) {\n        var handler = args[1];\n        getEventTarget(xhr).addEventListener(args[0], function (e) {\n          var event = (0, _xhrHook.configEvent)(e, _this);\n          event.type = args[0];\n          event.isTrusted = true;\n          handler.call(_this, event);\n        });\n        return true;\n      }\n    },\n    getAllResponseHeaders: function getAllResponseHeaders(_, xhr) {\n      var headers = xhr.resHeader;\n      if (headers) {\n        var header = \"\";\n        for (var key in headers) {\n          header += key + ': ' + headers[key] + '\\r\\n';\n        }\n        return header;\n      }\n    },\n    getResponseHeader: function getResponseHeader(args, xhr) {\n      var headers = xhr.resHeader;\n      if (headers) {\n        return headers[(args[0] || '').toLowerCase()];\n      }\n    }\n  }, win),\n      originXhr = _hook.originXhr,\n      unHook = _hook.unHook;\n\n  return {\n    originXhr: originXhr,\n    unProxy: unHook\n  };\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _xhrHook = __webpack_require__(0);\n\nObject.defineProperty(exports, \"hook\", {\n  enumerable: true,\n  get: function get() {\n    return _xhrHook.hook;\n  }\n});\n\nvar _xhrProxy = __webpack_require__(1);\n\nObject.defineProperty(exports, \"proxy\", {\n  enumerable: true,\n  get: function get() {\n    return _xhrProxy.proxy;\n  }\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// ajaxhook.umd.min.js","/*\n * author: wendux\n * email: 824783146@qq.com\n * source code: https://github.com/wendux/Ajax-hook\n */\n\nexport var events = ['load', 'loadend', 'timeout', 'error', 'readystatechange', 'abort'];\n\nvar OriginXhr = '__origin_xhr';\n\nexport function configEvent(event, xhrProxy) {\n  var e = {};\n  for (var attr in event) e[attr] = event[attr];\n  // xhrProxy instead\n  e.target = e.currentTarget = xhrProxy\n  return e;\n}\n\nexport function hook(proxy, win) {\n  win = win || window;\n  var originXhr = win.XMLHttpRequest;\n\n  var hooking = true;\n\n  var HookXMLHttpRequest = function () {\n    // We shouldn't hookAjax XMLHttpRequest.prototype because we can't\n    // guarantee that all attributes are on the prototype。\n    // Instead, hooking XMLHttpRequest instance can avoid this problem.\n\n    var xhr = new originXhr();\n\n    // Generate all callbacks(eg. onload) are enumerable (not undefined).\n    for (var i = 0; i < events.length; ++i) {\n      var key='on'+events[i];\n      if (xhr[key] === undefined) xhr[key] = null;\n    }\n\n    for (var attr in xhr) {\n      var type = \"\";\n      try {\n        type = typeof xhr[attr] // May cause exception on some browser\n      } catch (e) {\n      }\n      if (type === \"function\") {\n        // hookAjax methods of xhr, such as `open`、`send` ...\n        this[attr] = hookFunction(attr);\n      } else if (attr !== OriginXhr) {\n        Object.defineProperty(this, attr, {\n          get: getterFactory(attr),\n          set: setterFactory(attr),\n          enumerable: true\n        }) \n      }\n    }\n    var that = this;\n    xhr.getProxy = function () {\n      return that\n    }\n    this[OriginXhr] = xhr;\n  }\n\n  HookXMLHttpRequest.prototype = originXhr.prototype;\n  HookXMLHttpRequest.prototype.constructor = HookXMLHttpRequest;\n\n  win.XMLHttpRequest = HookXMLHttpRequest;\n\n  Object.assign(win.XMLHttpRequest, {UNSENT: 0, OPENED: 1, HEADERS_RECEIVED: 2, LOADING: 3, DONE: 4});\n\n  // Generate getter for attributes of xhr\n  function getterFactory(attr) {\n    return function () {\n      var originValue = this[OriginXhr][attr];\n      if (hooking) {\n        var v = this.hasOwnProperty(attr + \"_\") ? this[attr + \"_\"] : originValue;\n        var attrGetterHook = (proxy[attr] || {})[\"getter\"];\n        return attrGetterHook && attrGetterHook(v, this) || v;\n      } else {\n        return originValue;\n      }\n    }\n  }\n\n  // Generate setter for attributes of xhr; by this we have an opportunity\n  // to hookAjax event callbacks （eg: `onload`） of xhr;\n  function setterFactory(attr) {\n    return function (v) {\n      var xhr = this[OriginXhr];\n      if (hooking) {\n        var that = this;\n        var hook = proxy[attr];\n        // hookAjax  event callbacks such as `onload`、`onreadystatechange`...\n        if (attr.substring(0, 2) === 'on') {\n          that[attr + \"_\"] = v;\n          xhr[attr] = function (e) {\n            e = configEvent(e, that)\n            var ret = proxy[attr] && proxy[attr].call(that, xhr, e)\n            ret || v.call(that, e);\n          }\n        } else {\n          //If the attribute isn't writable, generate proxy attribute\n          var attrSetterHook = (hook || {})[\"setter\"];\n          v = attrSetterHook && attrSetterHook(v, that) || v\n          this[attr + \"_\"] = v;\n          try {\n            // Not all attributes of xhr are writable(setter may undefined).\n            xhr[attr] = v;\n          } catch (e) {\n          }\n        }\n      } else {\n        xhr[attr] = v;\n      }\n    }\n  }\n\n  // Hook methods of xhr.\n  function hookFunction(fun) {\n    return function () {\n      var args = [].slice.call(arguments);\n      if (proxy[fun] && hooking) {\n        var ret = proxy[fun].call(this, args, this[OriginXhr])\n        // If the proxy return value exists, return it directly,\n        // otherwise call the function of xhr.\n        if (ret) return ret;\n      }\n      return this[OriginXhr][fun].apply(this[OriginXhr], args);\n    }\n  }\n\n  function unHook() {\n      hooking = false;\n      if (win.XMLHttpRequest === HookXMLHttpRequest) {\n        win.XMLHttpRequest = originXhr;\n        HookXMLHttpRequest.prototype.constructor = originXhr;\n        originXhr = undefined;\n      }\n  }\n\n  // Return the real XMLHttpRequest and unHook func\n  return { originXhr, unHook  };\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/xhr-hook.js","/*\n * author: wendux\n * email: 824783146@qq.com\n * source code: https://github.com/wendux/Ajax-hook\n */\n\nimport {hook, configEvent, events} from \"./xhr-hook\";\n\nvar eventLoad = events[0],\n  eventLoadEnd = events[1],\n  eventTimeout = events[2],\n  eventError = events[3],\n  eventReadyStateChange = events[4],\n  eventAbort = events[5];\n\n\nvar prototype = 'prototype';\n\n\nexport function proxy(proxy, win) {\n  win = win || window;\n  return proxyAjax(proxy, win);\n}\n\nfunction trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n\nfunction getEventTarget(xhr) {\n  return xhr.watcher || (xhr.watcher = document.createElement('a'));\n}\n\nfunction triggerListener(xhr, name) {\n  var xhrProxy = xhr.getProxy();\n  var callback = 'on' + name + '_';\n  var event = configEvent({type: name}, xhrProxy);\n  xhrProxy[callback] && xhrProxy[callback](event);\n  var evt;\n  if (typeof(Event) === 'function') {\n    evt = new Event(name, {bubbles: false});\n  } else {\n    // https://stackoverflow.com/questions/27176983/dispatchevent-not-working-in-ie11\n    evt = document.createEvent('Event');\n    evt.initEvent(name, false, true);\n  }\n  getEventTarget(xhr).dispatchEvent(evt);\n}\n\n\nfunction Handler(xhr) {\n  this.xhr = xhr;\n  this.xhrProxy = xhr.getProxy();\n}\n\nHandler[prototype] = Object.create({\n  resolve: function resolve(response) {\n    var xhrProxy = this.xhrProxy;\n    var xhr = this.xhr;\n    xhrProxy.readyState = 4;\n    xhr.resHeader = response.headers;\n    xhrProxy.response = xhrProxy.responseText = response.response;\n    xhrProxy.statusText = response.statusText;\n    xhrProxy.status = response.status;\n    triggerListener(xhr, eventReadyStateChange);\n    triggerListener(xhr, eventLoad);\n    triggerListener(xhr, eventLoadEnd);\n  },\n  reject: function reject(error) {\n    this.xhrProxy.status = 0;\n    triggerListener(this.xhr, error.type);\n    triggerListener(this.xhr, eventLoadEnd);\n  }\n});\n\nfunction makeHandler(next) {\n  function sub(xhr) {\n    Handler.call(this, xhr);\n  }\n\n  sub[prototype] = Object.create(Handler[prototype]);\n  sub[prototype].next = next\n  return sub;\n}\n\nvar RequestHandler = makeHandler(function (rq) {\n  var xhr = this.xhr;\n  rq = rq || xhr.config;\n  xhr.withCredentials = rq.withCredentials;\n  xhr.open(rq.method, rq.url, rq.async !== false, rq.user, rq.password);\n  for (var key in rq.headers) {\n    xhr.setRequestHeader(key, rq.headers[key]);\n  }\n  xhr.send(rq.body);\n});\n\nvar ResponseHandler = makeHandler(function (response) {\n  this.resolve(response);\n});\n\nvar ErrorHandler = makeHandler(function (error) {\n  this.reject(error);\n});\n\nfunction proxyAjax(proxy, win) {\n  var onRequest = proxy.onRequest,\n    onResponse = proxy.onResponse,\n    onError = proxy.onError;\n\n  function getResponseData(xhrProxy) {\n    var responseType = xhrProxy.responseType;\n    if (!responseType || responseType === 'text') {\n      return xhrProxy.responseText;\n    }\n    // reference: https://shanabrian.com/web/html-css-js-technics/js-ie10-ie11-xhr-json-string.php\n    // reference: https://github.com/axios/axios/issues/2390\n    // json - W3C standard - xhrProxy.response = JSON object; responseText is unobtainable\n    // For details, see https://github.com/wendux/ajax-hook/issues/117\n    // IE 9, 10 & 11 - only responseText\n    var response = xhrProxy.response;\n    if (responseType === 'json' && !response) {\n      try {\n        return JSON.parse(xhrProxy.responseText);\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n    return response;\n  };\n\n  function handleResponse(xhr, xhrProxy) {\n    var handler = new ResponseHandler(xhr);\n    var ret = {\n      response: getResponseData(xhrProxy),\n      status: xhrProxy.status,\n      statusText: xhrProxy.statusText,\n      config: xhr.config,\n      headers: xhr.resHeader || xhr.getAllResponseHeaders().split('\\r\\n').reduce(function (ob, str) {\n        if (str === \"\") return ob;\n        var m = str.split(\":\");\n        ob[m.shift()] = trim(m.join(':'));\n        return ob;\n      }, {})\n    };\n    if (!onResponse) return handler.resolve(ret);\n    onResponse(ret, handler);\n  }\n\n  function onerror(xhr, xhrProxy, error, errorType) {\n    var handler = new ErrorHandler(xhr);\n    error = {config: xhr.config, error: error, type: errorType};\n    if (onError) {\n      onError(error, handler);\n    } else {\n      handler.next(error);\n    }\n  }\n\n  function preventXhrProxyCallback() {\n    return true;\n  }\n\n  function errorCallback(errorType) {\n    return function (xhr, e) {\n      onerror(xhr, this, e, errorType);\n      return true;\n    }\n  }\n\n  function stateChangeCallback(xhr, xhrProxy) {\n    if (xhr.readyState === 4 && xhr.status !== 0) {\n      handleResponse(xhr, xhrProxy);\n    } else if (xhr.readyState !== 4) {\n      triggerListener(xhr, eventReadyStateChange);\n    }\n    return true;\n  }\n\n\n  var { originXhr, unHook } =  hook({\n    onload: preventXhrProxyCallback,\n    onloadend: preventXhrProxyCallback,\n    onerror: errorCallback(eventError),\n    ontimeout: errorCallback(eventTimeout),\n    onabort: errorCallback(eventAbort),\n    onreadystatechange: function (xhr) {\n      return stateChangeCallback(xhr, this);\n    },\n    open: function open(args, xhr) {\n      var _this = this;\n      var config = xhr.config = {headers: {}};\n      config.method = args[0];\n      config.url = args[1];\n      config.async = args[2];\n      config.user = args[3];\n      config.password = args[4];\n      config.xhr = xhr;\n      var evName = 'on' + eventReadyStateChange;\n      if (!xhr[evName]) {\n        xhr[evName] = function () {\n          return stateChangeCallback(xhr, _this);\n        };\n      }\n\n      // 如果有请求拦截器，则在调用onRequest后再打开链接。因为onRequest最佳调用时机是在send前，\n      // 所以我们在send拦截函数中再手动调用open，因此返回true阻止xhr.open调用。\n      //\n      // 如果没有请求拦截器，则不用阻断xhr.open调用\n      if (onRequest) return true;\n    },\n    send: function (args, xhr) {\n      var config = xhr.config\n      config.withCredentials = xhr.withCredentials\n      config.body = args[0];\n      if (onRequest) {\n        // In 'onRequest', we may call XHR's event handler, such as `xhr.onload`.\n        // However, XHR's event handler may not be set until xhr.send is called in\n        // the user's code, so we use `setTimeout` to avoid this situation\n        var req = function () {\n          onRequest(config, new RequestHandler(xhr));\n        }\n        config.async === false ? req() : setTimeout(req)\n        return true;\n      }\n    },\n    setRequestHeader: function (args, xhr) {\n      // Collect request headers\n      xhr.config.headers[args[0].toLowerCase()] = args[1];\n      if (onRequest) return true;\n    },\n    addEventListener: function (args, xhr) {\n      var _this = this;\n      if (events.indexOf(args[0]) !== -1) {\n        var handler = args[1];\n        getEventTarget(xhr).addEventListener(args[0], function (e) {\n          var event = configEvent(e, _this);\n          event.type = args[0];\n          event.isTrusted = true;\n          handler.call(_this, event);\n        });\n        return true;\n      }\n    },\n    getAllResponseHeaders: function (_, xhr) {\n      var headers = xhr.resHeader\n      if (headers) {\n        var header = \"\";\n        for (var key in headers) {\n          header += key + ': ' + headers[key] + '\\r\\n';\n        }\n        return header;\n      }\n    },\n    getResponseHeader: function (args, xhr) {\n      var headers = xhr.resHeader\n      if (headers) {\n        return headers[(args[0] || '').toLowerCase()];\n      }\n    }\n  }, win);\n\n  return {\n    originXhr,\n    unProxy: unHook\n  }\n}\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/xhr-proxy.js","/*\n * author: wendux\n * email: 824783146@qq.com\n * source code: https://github.com/wendux/Ajax-hook\n **/\nexport { hook }from \"./src/xhr-hook\"\nexport { proxy } from \"./src/xhr-proxy\"\n\n\n\n\n// WEBPACK FOOTER //\n// ./index.js"],"sourceRoot":""}