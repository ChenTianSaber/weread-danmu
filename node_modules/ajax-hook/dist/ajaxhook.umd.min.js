!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)r[n]=e[n];return r.target=r.currentTarget=t,r}function o(e,t){function r(t){return function(){var r=this[u][t];if(p){var n=this.hasOwnProperty(t+"_")?this[t+"_"]:r,o=(e[t]||{}).getter;return o&&o(n,this)||n}return r}}function o(t){return function(r){var o=this[u];if(p){var i=this,s=e[t];if("on"===t.substring(0,2))i[t+"_"]=r,o[t]=function(s){s=n(s,i),e[t]&&e[t].call(i,o,s)||r.call(i,s)};else{var a=(s||{}).setter;r=a&&a(r,i)||r,this[t+"_"]=r;try{o[t]=r}catch(e){}}}else o[t]=r}}function a(t){return function(){var r=[].slice.call(arguments);if(e[t]&&p){var n=e[t].call(this,r,this[u]);if(n)return n}return this[u][t].apply(this[u],r)}}function c(){p=!1,t.XMLHttpRequest===v&&(t.XMLHttpRequest=f,v.prototype.constructor=f,f=void 0)}t=t||window;var f=t.XMLHttpRequest,p=!0,v=function(){for(var e=new f,t=0;t<s.length;++t){var n="on"+s[t];void 0===e[n]&&(e[n]=null)}for(var c in e){var p="";try{p=i(e[c])}catch(e){}"function"===p?this[c]=a(c):c!==u&&Object.defineProperty(this,c,{get:r(c),set:o(c),enumerable:!0})}var v=this;e.getProxy=function(){return v},this[u]=e};return v.prototype=f.prototype,v.prototype.constructor=v,t.XMLHttpRequest=v,Object.assign(t.XMLHttpRequest,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),{originXhr:f,unHook:c}}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.configEvent=n,t.hook=o;var s=t.events=["load","loadend","timeout","error","readystatechange","abort"],u="__origin_xhr"},function(e,t,r){"use strict";function n(e,t){return t=t||window,c(e,t)}function o(e){return e.replace(/^\s+|\s+$/g,"")}function i(e){return e.watcher||(e.watcher=document.createElement("a"))}function s(e,t){var r=e.getProxy(),n="on"+t+"_",o=(0,f.configEvent)({type:t},r);r[n]&&r[n](o);var s;"function"==typeof Event?s=new Event(t,{bubbles:!1}):(s=document.createEvent("Event"),s.initEvent(t,!1,!0)),i(e).dispatchEvent(s)}function u(e){this.xhr=e,this.xhrProxy=e.getProxy()}function a(e){function t(e){u.call(this,e)}return t[x]=Object.create(u[x]),t[x].next=e,t}function c(e,t){function r(e){var t=e.responseType;if(!t||"text"===t)return e.responseText;var r=e.response;if("json"===t&&!r)try{return JSON.parse(e.responseText)}catch(e){console.warn(e)}return r}function n(e,t){var n=new b(e),i={response:r(t),status:t.status,statusText:t.statusText,config:e.config,headers:e.resHeader||e.getAllResponseHeaders().split("\r\n").reduce(function(e,t){if(""===t)return e;var r=t.split(":");return e[r.shift()]=o(r.join(":")),e},{})};if(!x)return n.resolve(i);x(i,n)}function u(e,t,r,n){var o=new m(e);r={config:e.config,error:r,type:n},w?w(r,o):o.next(r)}function a(){return!0}function c(e){return function(t,r){return u(t,this,r,e),!0}}function p(e,t){return 4===e.readyState&&0!==e.status?n(e,t):4!==e.readyState&&s(e,l),!0}var v=e.onRequest,x=e.onResponse,w=e.onError,E=(0,f.hook)({onload:a,onloadend:a,onerror:c(h),ontimeout:c(d),onabort:c(y),onreadystatechange:function(e){return p(e,this)},open:function(e,t){var r=this,n=t.config={headers:{}};n.method=e[0],n.url=e[1],n.async=e[2],n.user=e[3],n.password=e[4],n.xhr=t;var o="on"+l;if(t[o]||(t[o]=function(){return p(t,r)}),v)return!0},send:function(e,t){var r=t.config;if(r.withCredentials=t.withCredentials,r.body=e[0],v){var n=function(){v(r,new g(t))};return!1===r.async?n():setTimeout(n),!0}},setRequestHeader:function(e,t){if(t.config.headers[e[0].toLowerCase()]=e[1],v)return!0},addEventListener:function(e,t){var r=this;if(-1!==f.events.indexOf(e[0])){var n=e[1];return i(t).addEventListener(e[0],function(t){var o=(0,f.configEvent)(t,r);o.type=e[0],o.isTrusted=!0,n.call(r,o)}),!0}},getAllResponseHeaders:function(e,t){var r=t.resHeader;if(r){var n="";for(var o in r)n+=o+": "+r[o]+"\r\n";return n}},getResponseHeader:function(e,t){var r=t.resHeader;if(r)return r[(e[0]||"").toLowerCase()]}},t);return{originXhr:E.originXhr,unProxy:E.unHook}}Object.defineProperty(t,"__esModule",{value:!0}),t.proxy=n;var f=r(0),p=f.events[0],v=f.events[1],d=f.events[2],h=f.events[3],l=f.events[4],y=f.events[5],x="prototype";u[x]=Object.create({resolve:function(e){var t=this.xhrProxy,r=this.xhr;t.readyState=4,r.resHeader=e.headers,t.response=t.responseText=e.response,t.statusText=e.statusText,t.status=e.status,s(r,l),s(r,p),s(r,v)},reject:function(e){this.xhrProxy.status=0,s(this.xhr,e.type),s(this.xhr,v)}});var g=a(function(e){var t=this.xhr;e=e||t.config,t.withCredentials=e.withCredentials,t.open(e.method,e.url,!1!==e.async,e.user,e.password);for(var r in e.headers)t.setRequestHeader(r,e.headers[r]);t.send(e.body)}),b=a(function(e){this.resolve(e)}),m=a(function(e){this.reject(e)})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);Object.defineProperty(t,"hook",{enumerable:!0,get:function(){return n.hook}});var o=r(1);Object.defineProperty(t,"proxy",{enumerable:!0,get:function(){return o.proxy}})}])});
//# sourceMappingURL=ajaxhook.umd.min.js.map